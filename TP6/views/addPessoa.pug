extends layout

block content
  .w3-card-4
    header.w3-container.w3-teal
      h1 Dados da Pessoa:
    
    form.w3-container(method="POST" onsubmit="event.preventDefault();" id="form")
        fieldset
           legend Dados Pessoais
                label Nome
                input.w3-input.w3-border.w3-round.w3-margin-bottom(type="text" name="nome" required)
                label Idade
                input.w3-input.w3-border.w3-round.w3-margin-bottom(type="number" name="idade" required)
                label Sexo
                select.w3-input.w3-border.w3-round.w3-margin-bottom(name="sexo" required)
                    option(value="masculino") Masculino
                    option(value="feminino") Feminino
                    option(value="outro") Outro
                fieldset
                    legend Morada 
                    label Cidade
                    input.w3-input.w3-border.w3-round.w3-margin-bottom(type="text" name="morada.cidade" required)
                    label Distrito 
                    input.w3-input.w3-border.w3-round.w3-margin-bottom(type="text" name="morada.distrito" required)
                fieldset
                    legend Documento de Identificação
                    label BI
                    input.w3-input.w3-border.w3-round.w3-margin-bottom(type="text" name="BI")
                    label CC
                    input.w3-input.w3-border.w3-round.w3-margin-bottom(type="text" name="CC")
                label Descrição
                inputw3-input.w3-border.w3-round.w3-margin-bottom(type="text" name="descrição")
                label Profissão
                input.w3-input.w3-border.w3-round.w3-margin-bottom(type="text" name="profissao" required)
                fieldset
                    legend Partido Político
                    label Abreviatura
                    input.w3-input.w3-border.w3-round.w3-margin-bottom(type="text" name="partido_politico.party_abbr" required)
                    label CC
                    input.w3-input.w3-border.w3-round.w3-margin-bottom(type="text" name="partido_politico.party_name" required)
                label Religião
                input.w3-input.w3-border.w3-round.w3-margin-bottom(type="text" name="religião")
                label Desportos 
                textarea.w3-input.w3-border.w3-round.w3-margin-bottom(name="desportos")
                label Animais
                textarea.w3-input.w3-border.w3-round.w3-margin-bottom(name="animais")
                label Marca de Carro
                input.w3-input.w3-border.w3-round.w3-margin-bottom(type="text" name="marca_carro")
                label Destinos Favoritos
                textarea.w3-input.w3-border.w3-round.w3-margin-bottom(name="destinos_favoritos")
                fieldset
                    legend Atributos
                    each atributo in ["fumador","gosta_cinema","gosta_viajar","acorda_cedo","gosta_ler","gosta_musica","gosta_comer","gosta_animais_estimacao","gosta_dancar"]
                        label.w3-margin-right= atributo
                        input.w3-check(type="checkbox" name="atributos."+atributo value=atributo)
                    label Comida Favorita
                    input.w3-input.w3-border.w3-round.w3-margin-bottom(type="text" name="atributos.comida_favorita")
                input.w3-btn.w3-round.w3-indigo.w3-margin-bottom(type="submit" value="Submit" onclick="treatFields();" form="form")
                input.w3-btn.w3-round.w3-indigo.w3-margin-bottom(type="reset" value="Reset")

    footer.w3-container.w3-teal 
      h5 Generated by RPCW2023 in #{d} - #[a(href="/") Return]
    
    script(type="text/javascript").
        function treatFields() {
            var textareas = document.querySelectorAll("textarea");
            for (var i = 0; i < textareas.length; i++) {
                var textarea = textareas[i];
                var name = textarea.getAttribute("name");
                var value = textarea.value.split("/\r?\n/");
                var input = document.createElement("input");
                input.setAttribute("type", "hidden");
                input.setAttribute("name", name);
                input.setAttribute("value", value);
                textarea.parentNode.insertBefore(input, textarea);
            }
        }



